<!DOCTYPE html>
<html>
	<head>
		<title>Dust 0.1.0 (Pre-alpha)</title>
		<script src="common/dummy_worker.js"></script>
		<script src="lib/Canvas++.js"></script>
		<script src="common/constants.js"></script>
		<script src="client/client.js"></script>
		<script>
			var client;
			var server_worker;
			
			onload = function() {
				
				var canvas = document.createElement('canvas');
				canvas.width = innerWidth;
				canvas.height = innerHeight;
				
				document.body.innerHTML = '';
				document.body.appendChild(canvas);
				
				client = new DustClient(canvas);

				server_worker = new Worker('worker.js');
				server_worker.postMessage('server/server.js');
				
				server_worker.postMessage({
					name: 'Singleplayer local server',
					generator: 'basic'
				});

				client.send = function(message) {
					server_worker.postMessage(message);
				};

				server_worker.onmessage = function(message) {
					client.onmsg(message.data);
				};
			};
		</script>
		<style>
			html, body {
				margin: 0;
				width: 100%;
				height: 100%;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		Dust requires a modern browser with HTML5 support.
	</body>
</html>
